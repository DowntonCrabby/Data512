# Wikipedia Article Quality By Population Analysis

## Project Goals

The goal of this assignment is to explore the concept of bias in data using Wikipedia articles. Specifically, this project focuses on analyzing articles about political figures from various countries. The analysis will combine Wikipedia article data with country population data and use the ORES machine learning service to estimate the quality of each article.

The primary objectives of this project are:
- To analyze the coverage of politicians on Wikipedia and determine how it varies among countries.
- To examine the quality of articles about politicians and compare the proportion of high-quality articles across different countries.
- To rank countries and geographic regions based on articles-per-person and the proportion of high-quality articles.
  
The analysis will result in a series of tables highlighting:
- The countries with the greatest and least coverage of politicians on Wikipedia relative to their population.
- The countries with the highest and lowest proportion of high-quality articles about politicians.
- A ranking of geographic regions by articles-per-person and high-quality articles-per-person.

This project aims to shed light on potential biases in Wikipedia's coverage of political figures and the quality of the articles about them.

## License of the Source Data

The datasets used in this project come from several different sources:

- **Wikipedia Data**: The list of articles about politicians was generated by crawling the Wikipedia Category: Politicians by nationality. This data is provided in the file `politicians_by_country_AUG.2024.csv`. Wikipedia content is available under the Creative Commons Attribution-ShareAlike (CC-BY-SA) license.
  
- **Population Data**: The population data is provided in the file `population_by_country_AUG.2024.csv`, which was downloaded from the Population Reference Bureau’s (PRB) World Population Data Sheet. The PRB data is publicly available and can be accessed at [PRB.org](https://www.prb.org/international/). I also went through their list of Countries and Regions to put together the prb_org_regions_and_countries.csv

- **ORES Scores**: Article quality predictions were generated using the ORES (Objective Revision Evaluation Service) machine learning tool provided by the Wikimedia Foundation. The ORES API is transitioning to the LiftWing ML Service infrastructure. More information about ORES can be found in the official [ORES API documentation](https://www.mediawiki.org/wiki/ORES). ORES is an open tool, and data generated through it can be used under the Creative Commons Attribution-ShareAlike (CC-BY-SA) license.

All code examples provided for this assignment were developed by Dr. David W. McDonald for use in the DATA 512 course in the UW MS Data Science degree program. These examples are licensed under the Creative Commons CC-BY license.

---

## Coding Files in This Project

### 1. `Notebook1.ipynb`
This notebook contains preliminary or additional analysis steps that support the main project. It may include:
- Exploration of the dataset.
- Early versions of the article and population calculations.
- Visualizations and checks for data integrity before final analysis.

### 2. `Notesbook2.ipynb`
This Jupyter notebook is part of a project analyzing Wikipedia articles about politicians by country and region. The analysis focuses on calculating two key metrics: 
 - total articles per capita
 - high-quality articles per capita. 
 Using data from Wikipedia and ORES quality predictions, the notebook performs calculations for both country-level and regional-level rankings based on these metrics. The final output includes tables showcasing the top and bottom countries and regions by coverage and article quality, providing insights into Wikipedia's political content distribution.


### 3. `wiki_requests.py`
This Python script automates requests to Wikipedia and processes article data, potentially interacting with ORES or another tool to fetch article revisions and quality predictions. It may handle:
- Sending requests to Wikipedia API.
- Processing responses to gather article revision and ORES quality data.
- Preparing data for analysis in the Jupyter notebooks.

---

## Input Files

### 1. `population_by_country_AUG2024.csv`
This file contains population data for various countries and regions, updated as of August 2024. The data is used to calculate **articles per capita** and **high-quality articles per capita** in the analysis. Key columns include:
- `country`: The name of the country.
- `region`: The geographic region the country belongs to.
- `population_millions`: The population of the country or region, represented in millions.

### 2. `politicians_by_country_AUG2024.csv`
This file contains data on Wikipedia articles about politicians, categorized by country. The data includes article revision IDs and quality predictions (provided by ORES). This dataset is used to assess the coverage and quality of Wikipedia articles about politicians by country and region. Key columns include:
- `politician_name`: The name of the politician.
- `article_revision_id`: The unique ID for the Wikipedia article revision.
- `quality_prediction`: The ORES quality prediction for the article, indicating whether it's a "FA" (Featured Article), "GA" (Good Article), or other quality class.
- `country`: The country the politician is associated with.

Both files are essential for calculating per capita metrics in the overall analysis.

### 3. `prb_org_regions_and_countries.csv`

This file contains a mapping of countries to geographic regions, sourced from the Population Reference Bureau (PRB) at [https://www.prb.org/international/](https://www.prb.org/international/). The data is used to categorize countries into regions for analysis of Wikipedia articles related to politicians. I put this together manually from the website to allow myself to map the countries to regions.

Key columns include:
- `country`: The name of the country.
- `region`: The geographic region the country is classified into, based on PRB's international classifications.
  
This dataset ensures that countries are grouped into their appropriate regional hierarchy, supporting the calculation of total and high-quality articles per capita at both the country and regional levels. The classification provided by PRB helps maintain consistency in the geographic analysis of Wikipedia's coverage.

## Intermediate & Computed Files

### 1. `wp_politicians_by_country.csv`
This file contains data on Wikipedia articles about politicians, grouped by country. It is the result of combining and processing the raw politician article data with population data. Key columns include:
- `politician_name`: The name of the politician.
- `country`: The country associated with the politician.
- `article_revision_id`: The Wikipedia revision ID for the article.
- `quality_prediction`: The ORES quality prediction for the article (e.g., "FA" for Featured Article or "GA" for Good Article).

### 2. `wp_countries-no_match.txt`
This file lists the countries from the Wikipedia dataset that could not be matched with countries from the population data. These entries were excluded from the final analysis. Example entries include:
- Guinea-Bissau
- Korea, South&#8203;:contentReference[oaicite:0]{index=0}

### 3. `revision_ids_by_politician.csv`
This file stores the revision IDs of Wikipedia articles related to each politician. It provides the article version history and is used for fetching data about the quality and content of articles.

### 4. `predicted_scores.csv`
This file contains the ORES (Objective Revision Evaluation Service) predicted scores for each article revision. These scores predict the quality class of each article and are used to determine whether an article is classified as high-quality (either "FA" or "GA").

### 5. `population_by_region.csv`
This file contains population data at the regional level, used for calculating the number of articles per capita by region. Key columns include:
- `region`: The geographic region.
- `population_millions`: The population of the region in millions.

### 6. `population_by_country.csv`
This file contains population data at the country level. It is used to calculate per capita metrics for each country. Key columns include:
- `country`: The name of the country.
- `population_millions`: The population of the country, represented in millions.

### 7. `page_info_output.json`
This file stores metadata about Wikipedia pages related to politicians, such as page IDs, titles, lengths, and revision histories. The data is used for tracking article updates and ensuring accurate quality predictions. Key fields include:
- `pageid`: The unique ID of the Wikipedia page.
- `title`: The title of the Wikipedia page.
- `lastrevid`: The ID of the last revision made to the page.
- `length`: The length of the article in bytes.
- `fullurl`: The URL to the Wikipedia article page.&#8203;:contentReference[oaicite:1]{index=1}


### Known Issues and Special Considerations

1. **Data Consistency**: 
   - The dataset created by crawling Wikipedia's "Politicians by nationality" category may contain inconsistencies or duplicate entries due to the folksonomic nature of Wikipedia categories. These categories are not strictly controlled, so some articles may not accurately reflect individual politicians. Any such inconsistencies should be identified and documented during the analysis.
   - The dataset may also include politicians from non-sovereign entities or regions that do not correspond to individual countries listed in the population dataset. These cases require special handling, such as excluding unmatched entries.

2. **Missing Data**:
   - Some countries listed in the politician dataset may not have corresponding population data or may not match due to variations in country names. A separate file (`wp_countries-no_match.txt`) logs these unmatched countries, and these entries are excluded from the analysis.
   - There are rows in the population dataset representing cumulative regional population counts (e.g., AFRICA, OCEANIA) which should not be matched with individual countries but retained for regional analysis.

3. **ORES Predictions**:
   - The ORES machine learning model is used to estimate article quality. While ORES provides useful predictions, its estimates are not perfect and should be treated as approximations.
   - As the ORES API is transitioning to the LiftWing ML infrastructure, there may be changes or disruptions in how predictions are generated. Users should stay updated with Wikimedia's API portal for any modifications.

4. **Bias in Wikipedia Coverage**:
   - Wikipedia relies on user-generated content, and as such, coverage of politicians and article quality can vary significantly by country or region. Some countries may be underrepresented or overrepresented in terms of the number and quality of articles about their political figures.
   - The analysis performed in this project aims to identify and highlight these potential biases, but users should be aware that Wikipedia’s open nature inherently introduces variability and gaps in coverage.

5. **Very Small Proportions**:
   - Given the large population sizes of some countries, the calculated proportions of articles per capita or high-quality articles per capita will likely result in very small numbers. It’s important to carefully represent and interpret these proportions to avoid misinterpretation.


